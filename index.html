<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="author" content="asapdev" />
    <meta name="modified by" content="blanco" />
    <meta name="description" content="Chatlog Magician for GTA World" />
    <meta name="keywords" content="GTAW, GTAWorld, GTA World, RAGE MP, chatlog magician, chatlog, magician" />
    <title>Chatlog Magician</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/foundation-sites@6.8.1/dist/css/foundation.min.css" />
    <link href="css/app.css" rel="stylesheet" />
    <link rel="icon" href="favicon.png" />
  </head>
  <body>
    <div class="grid-container">
      <div class="grid-x">
        <div class="cell">
          <input type="hidden" class="form-control" id="name" />
        </div>
      </div>
      <div class="clog_settings">
        <div class="grid-x grid-margin-x">
          <div class="cell small-1 medium-1 large-1">
            <label for="font-label">Font Size</label>
            <input name="font-label" id="font-label" type="number" min="10" max="64" value="12" />
          </div>
        </div>
      </div>
      <div class="text-center">
        <div class="textarea-container">
          <textarea class="form-control textarea-input" rows="15" placeholder=""></textarea>
          <div class="logo-overlay">
            <img src="logo.png" alt="Logo" />
          </div>
        </div>
        <div class="button-group-container">
          <div class="button-group">
            <button id="downloadOutputTransparent" class="button success">Download</button>
            <button id="toggleBackground" class="button secondary">Toggle Background</button>
          </div>
          <div class="scale-toggle">
            <input class="switch-input" id="scaleToggle" type="checkbox" name="scale-toggle" />
            <label class="switch-paddle" for="scaleToggle">
              <span class="switch-active" aria-hidden="true">Yes</span>
              <span class="switch-inactive" aria-hidden="true">No</span>
            </label>
            <span class="toggle-label">Enable High-Resolution Image</span>
          </div>
        </div>
        <div class="opacity-50">
          <i> Mwah. </i>
        </div>
      </div>
      <div class="output" id="output"></div>
    </div>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/foundation-sites@6.8.1/dist/js/foundation.min.js"></script>
    <script>
      $(document).foundation();
    </script>
    <script src="js/download-img.js"></script>
    <script src="js/download.js"></script>
    <script>
      $(document).ready(function() {
        let scaleEnabled = false;
        $("#scaleToggle").change(function() {
          scaleEnabled = $(this).is(":checked");
        });
        $("#downloadOutputTransparent").click(function() {
          let scale = scaleEnabled ? 2 : 1;
          let output = $("#output");
          let originalPadding = output.css("padding");
          let extraPaddingBottom = "30px";
          output.css({
            "padding-top": "0",
            "padding-bottom": extraPaddingBottom,
          });
          output[0].offsetHeight;
          domtoimage.toBlob(document.getElementById("output"), {
            width: output.width() * scale,
            height: (output.height() + 30) * scale,
            style: {
              transform: `scale(${scale})`,
              transformOrigin: "top left",
            },
          }).then(function(blob) {
            window.saveAs(blob, new Date().toLocaleString().replaceAll(",", "_").replaceAll(" ", "_").replaceAll("/", "-").replace("__", "_").replaceAll(":", "-") + "_chatlog.png");
            output.css("padding", originalPadding);
          });
        });
        $("#toggleBackground").click(function() {
          $("#output").toggleClass("background-active");
        });
      });
    </script>
    <script src="js/parse-text.js"></script>
    <script src="js/chat.js"></script>
    <script src="js/color-picker.js"></script>
    <script src="js/chatlog-parser.js"></script>
  </body>
</html>
